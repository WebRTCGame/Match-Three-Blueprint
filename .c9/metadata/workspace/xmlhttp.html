{"filter":false,"title":"xmlhttp.html","tooltip":"/xmlhttp.html","undoManager":{"mark":14,"position":14,"stack":[[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":0,"column":0},"end":{"row":1,"column":0}},"text":"\n"},{"action":"insertLines","range":{"start":{"row":1,"column":0},"end":{"row":124,"column":0}},"lines":["//---------------------------------","//","//Javascript sample code to display an image downloaded with XMLHTTPRequest","//","//author:phil@philten.com - http://www.philten.com","//Date: 2010/12/15","//version: 1.0","//url french: http://www.philten.com/fr-xmlhttprequest-image","//url english: http://www.philten.com/us-xmlhttprequest-image","//---------------------------------","","<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01//EN\" \"http://www.w3.org/TR/html4/strict.dtd\">","<html>","\t<head>","\t\t<meta http-equiv=\"Content-Type\" content=\"text/html; charset=iso-8859-1\">","\t\t<title>Display en image loaded with XMLHttpRequest</title>","\t\t\t\t","\t</head>","\t<body>","\t\t","<img src=\"\" id=\"myimg\" >","","<br>","","\t</body>","</html>","","","<script type=\"text/javascript\">","<!--","","//make sure to use an image on the same server ","var url=\"/test.jpg\";","","var xhr = getXMLHttpRequest();","xhr.onreadystatechange=ProcessResponse;","xhr.open(\"GET\",url, true);","xhr.overrideMimeType('text/plain; charset=x-user-defined'); ","xhr.send(null);","","//------------------------------------","function getXMLHttpRequest() {","\tvar xhr = null;","\t","\tif (window.XMLHttpRequest || window.ActiveXObject) {","\t\tif (window.ActiveXObject) {","\t\t\ttry {","\t\t\t\txhr = new ActiveXObject(\"Msxml2.XMLHTTP\");","\t\t\t} catch(e) {","\t\t\t\txhr = new ActiveXObject(\"Microsoft.XMLHTTP\");","\t\t\t}","\t\t} else {","\t\t\txhr = new XMLHttpRequest(); ","\t\t}","\t} else {","\t\talert(\"Your browser does not support XMLHTTP\");","\t\treturn null;","\t}","\t","\treturn xhr;","}","","//------------------------------------","function ProcessResponse()","    {","      if(xhr.readyState==4)","      {","        if(xhr.status==200)","        {","            var img=document.getElementById(\"myimg\");","            img.src=\"data:image/jpeg;base64,\" + encode64(xhr.responseText);","            img.style.display=\"\";","        }","        else","        {","          alert(\"Error Retriving Data!\");","        }","      }","    }","","//--------------------------------------------------","function encode64(inputStr) ","{","   var b64 = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";","   var outputStr = \"\";","   var i = 0;","   ","   while (i<inputStr.length)","   {","      //all three \"& 0xff\" added below are there to fix a known bug ","      //with bytes returned by xhr.responseText","      var byte1 = inputStr.charCodeAt(i++) & 0xff;","      var byte2 = inputStr.charCodeAt(i++) & 0xff;","      var byte3 = inputStr.charCodeAt(i++) & 0xff;","","      var enc1 = byte1 >> 2;","      var enc2 = ((byte1 & 3) << 4) | (byte2 >> 4);","\t  ","\t  var enc3, enc4;","\t  if (isNaN(byte2))","\t   {","\t\tenc3 = enc4 = 64;","\t   }","\t  else","\t  {","      \tenc3 = ((byte2 & 15) << 2) | (byte3 >> 6);","\t\tif (isNaN(byte3))","\t\t  {","           enc4 = 64;","\t\t  }","\t\telse","\t\t  {","\t      \tenc4 = byte3 & 63;","\t\t  }","\t  }","","      outputStr +=  b64.charAt(enc1) + b64.charAt(enc2) + b64.charAt(enc3) + b64.charAt(enc4);","   } ","   ","   return outputStr;","}","","//-->"]},{"action":"insertText","range":{"start":{"row":124,"column":0},"end":{"row":124,"column":9}},"text":"</script>"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":33,"column":10},"end":{"row":33,"column":18}},"text":"test.jpg"},{"action":"insertText","range":{"start":{"row":33,"column":10},"end":{"row":33,"column":11}},"text":"g"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":33,"column":11},"end":{"row":33,"column":12}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":33,"column":12},"end":{"row":33,"column":13}},"text":"m"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":33,"column":13},"end":{"row":33,"column":14}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":33,"column":14},"end":{"row":33,"column":15}},"text":"."}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":33,"column":15},"end":{"row":33,"column":16}},"text":"p"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":33,"column":16},"end":{"row":33,"column":17}},"text":"n"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":33,"column":17},"end":{"row":33,"column":18}},"text":"g"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":33,"column":9},"end":{"row":33,"column":10}},"text":"/"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":30,"column":3},"end":{"row":30,"column":4}},"text":"-"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":30,"column":2},"end":{"row":30,"column":3}},"text":"-"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":30,"column":1},"end":{"row":30,"column":2}},"text":"!"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":30,"column":0},"end":{"row":30,"column":1}},"text":"<"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":123,"column":0},"end":{"row":123,"column":5}},"text":"//-->"}]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":9,"column":61},"end":{"row":9,"column":61},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1409762205664,"hash":"9b31ce06a23f89f5ac66c6f4021330495accce50"}