{"filter":false,"title":"test.html","tooltip":"/pixi/test.html","undoManager":{"mark":27,"position":27,"stack":[[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":0,"column":0},"end":{"row":1,"column":0}},"text":"\n"},{"action":"insertLines","range":{"start":{"row":1,"column":0},"end":{"row":180,"column":0}},"lines":["<!DOCTYPE HTML>","<html>","     <head>","          <title>PIXI Concentration</title>","          <style>","               body {","                    margin: 0;","                    padding: 0;","                    background-color: #885500;","               }","          </style>","          <script src=\"pixi.dev.js\"></script>","          <script src=\"tweenjs.js\"></script>","     </head>","     <body>","          <script>","               // first tile picked up by the player","               var firstTile=null;","               // second tile picked up by the player","               var secondTile=null;","               // can the player pick up a tile?","               var canPick=true;","               // create an new instance of a pixi stage with a grey background","               var stage = new PIXI.Stage(0x888888);","               // create a renderer instance width=640 height=480","               var renderer = PIXI.autoDetectRenderer(800,800);","               // add the renderer view element to the DOM","               document.body.appendChild(renderer.view);","               // importing a texture atlas created with texturepacker","               var tileAtlas = [\"images.json\"];","               // create a new loader","               var loader = new PIXI.AssetLoader(tileAtlas);\t\t\t         ","               // create an empty container","               var gameContainer = new PIXI.DisplayObjectContainer();","               // add the container to the stage","               stage.addChild(gameContainer);","               // use callback","               loader.onComplete = onTilesLoaded","               //begin load","               loader.load();\t","               function onTilesLoaded(){","                    // choose 24 random tile images","                    var chosenTiles=new Array();","                    while(chosenTiles.length<48){","                         var candidate=Math.floor(Math.random()*44);","                         if(chosenTiles.indexOf(candidate)==-1){","                              chosenTiles.push(candidate,candidate)","                         }\t\t\t","                    }","                    // shuffle the chosen tiles","                    for(i=0;i<96;i++){","                         var from = Math.floor(Math.random()*48);","                         var to = Math.floor(Math.random()*48);","                         var tmp = chosenTiles[from];","                         chosenTiles[from]=chosenTiles[to];","                         chosenTiles[to]=tmp;","                    }","                    // place down tiles","                    for(i=0;i<8;i++){","                         for(j=0;j<6;j++){","                              // new sprite","                              var tile = PIXI.Sprite.fromFrame(chosenTiles[i*6+j]);","                              // buttonmode+interactive = acts like a button","                              tile.buttonMode=true;","                              tile.interactive = true;","                              // is the tile selected?","                              tile.isSelected=false;","                              // set a tile value","                              tile.theVal=chosenTiles[i*6+j];","                              // place the tile","                              tile.position.x = Math.random()*600;","                              tile.position.y = -Math.random()*100 - 100;","                              tile.rotation = Math.random()*2*3.14;","                              // paint tile black","                              tile.tint = 0x000000;","                              // set it a bit transparent (it will look grey)","                              tile.alpha=0.5;","                              new TWEEN.Tween(tile)","                                   .to({x: 7+i*80, y: 7+j*80, rotation:0}, 2400 + Math.random()*1200)","                                   .easing(TWEEN.Easing.Elastic.Out)","                              .start();","                              // add the tile","                              gameContainer.addChild(tile);","                              // mouse-touch listener","                              tile.mousedown = tile.touchstart = function(data){","                                   // can I pick a tile?","                                   if(canPick) {","                                        // is the tile already selected?","                                        if(!this.isSelected){","                                             new TWEEN.Tween(this)","                                                  .to({width:0.0, x:\"+32\"}, 300)","                                                  .easing(TWEEN.Easing.Linear.None).onComplete(function() {","                                                       this.tint = 0xffffff;","                                                  })","                                                  .chain(new TWEEN.Tween(this)","                                                  .to({alpha: 1.0, width:64, x:\"-32\"}, 300)","                                                  .easing(TWEEN.Easing.Linear.None))","                                             .start();","                                             // set the tile to selected","                                             this.isSelected = true;","                                             // show the tile","                                             //this.tint = 0xffffff;","                                             //this.alpha = 1;","                                             // is it the first tile we uncover?","                                             if(firstTile==null){","                                                  firstTile=this","                                             }","                                             // this is the second tile","                                             else{","                                                  secondTile=this","                                                  // can't pick anymore","                                                  canPick=false;","                                                  // did we pick the same tiles?","                                                  if(firstTile.theVal==secondTile.theVal){","                                                       // wait a second then remove the tiles and make the player able to pick again","                                                       setTimeout(function(){","                                                            new TWEEN.Tween(firstTile)","                                                                 .to({width:\"+100\", height:\"+100\", x:\"-50\", y:\"-50\", alpha:0.0}, 600)","                                                                 .easing(TWEEN.Easing.Linear.None)","                                                                 .onComplete(function() {","                                                                      gameContainer.removeChild(this);","                                                                 })","                                                            .start();","                                                            new TWEEN.Tween(secondTile)","                                                                 .to({width:\"+100\", height:\"+100\", x:\"-50\", y:\"-50\", alpha:0.0}, 600)","                                                                 .easing(TWEEN.Easing.Linear.None).onComplete(function() {    ","                                                                      gameContainer.removeChild(this);","                                                                      canPick=true;","                                                                 })","                                                            .start();","                                                            firstTile=null;","                                                            secondTile=null;","                                                       },1000);","                                                  }","                                                  // we picked different tiles","                                                  else{","                                                       // wait a second then cover the tiles and make the player able to pick again","                                                       setTimeout(function(){","                                                            firstTile.isSelected=false","                                                            secondTile.isSelected=false","                                                            new TWEEN.Tween(firstTile)","                                                                 .to({alpha: 0.5, width:0.0, x:\"+32\"}, 150)","                                                                 .easing(TWEEN.Easing.Linear.None).onComplete(function() {","                                                                      this.tint = 0x000000;","                                                                 })","                                                                 .chain(new TWEEN.Tween(firstTile)","                                                                 .to({width:64, x:\"-32\"}, 150)","                                                                 .easing(TWEEN.Easing.Linear.None))","                                                            .start();","                                                            new TWEEN.Tween(secondTile)","                                                                 .to({alpha: 0.5, width:0.0, x:\"+32\"}, 150)","                                                                 .easing(TWEEN.Easing.Linear.None)","                                                                 .onComplete(function() {","                                                                      this.tint = 0x000000;","                                                                      canPick=true;","                                                                 })","                                                                 .chain(new TWEEN.Tween(secondTile)","                                                                 .to({width:64, x:\"-32\"}, 150)","                                                                 .easing(TWEEN.Easing.Linear.None))","                                                            .start();","                                                            firstTile=null;","                                                            secondTile=null;","                                                       },1000);","                                                  }","                                             }\t","                                        }","                                   }","                              }","                         }","                    } ","                    requestAnimFrame(animate);","               }","               function animate() {","                    requestAnimFrame(animate);","                    TWEEN.update();","                    renderer.render(stage);","               }","          </script>","     </body>"]},{"action":"insertText","range":{"start":{"row":180,"column":0},"end":{"row":180,"column":7}},"text":"</html>"}]}],[{"group":"doc","deltas":[{"action":"removeLines","range":{"start":{"row":17,"column":0},"end":{"row":178,"column":0}},"nl":"\n","lines":["               // first tile picked up by the player","               var firstTile=null;","               // second tile picked up by the player","               var secondTile=null;","               // can the player pick up a tile?","               var canPick=true;","               // create an new instance of a pixi stage with a grey background","               var stage = new PIXI.Stage(0x888888);","               // create a renderer instance width=640 height=480","               var renderer = PIXI.autoDetectRenderer(800,800);","               // add the renderer view element to the DOM","               document.body.appendChild(renderer.view);","               // importing a texture atlas created with texturepacker","               var tileAtlas = [\"images.json\"];","               // create a new loader","               var loader = new PIXI.AssetLoader(tileAtlas);\t\t\t         ","               // create an empty container","               var gameContainer = new PIXI.DisplayObjectContainer();","               // add the container to the stage","               stage.addChild(gameContainer);","               // use callback","               loader.onComplete = onTilesLoaded","               //begin load","               loader.load();\t","               function onTilesLoaded(){","                    // choose 24 random tile images","                    var chosenTiles=new Array();","                    while(chosenTiles.length<48){","                         var candidate=Math.floor(Math.random()*44);","                         if(chosenTiles.indexOf(candidate)==-1){","                              chosenTiles.push(candidate,candidate)","                         }\t\t\t","                    }","                    // shuffle the chosen tiles","                    for(i=0;i<96;i++){","                         var from = Math.floor(Math.random()*48);","                         var to = Math.floor(Math.random()*48);","                         var tmp = chosenTiles[from];","                         chosenTiles[from]=chosenTiles[to];","                         chosenTiles[to]=tmp;","                    }","                    // place down tiles","                    for(i=0;i<8;i++){","                         for(j=0;j<6;j++){","                              // new sprite","                              var tile = PIXI.Sprite.fromFrame(chosenTiles[i*6+j]);","                              // buttonmode+interactive = acts like a button","                              tile.buttonMode=true;","                              tile.interactive = true;","                              // is the tile selected?","                              tile.isSelected=false;","                              // set a tile value","                              tile.theVal=chosenTiles[i*6+j];","                              // place the tile","                              tile.position.x = Math.random()*600;","                              tile.position.y = -Math.random()*100 - 100;","                              tile.rotation = Math.random()*2*3.14;","                              // paint tile black","                              tile.tint = 0x000000;","                              // set it a bit transparent (it will look grey)","                              tile.alpha=0.5;","                              new TWEEN.Tween(tile)","                                   .to({x: 7+i*80, y: 7+j*80, rotation:0}, 2400 + Math.random()*1200)","                                   .easing(TWEEN.Easing.Elastic.Out)","                              .start();","                              // add the tile","                              gameContainer.addChild(tile);","                              // mouse-touch listener","                              tile.mousedown = tile.touchstart = function(data){","                                   // can I pick a tile?","                                   if(canPick) {","                                        // is the tile already selected?","                                        if(!this.isSelected){","                                             new TWEEN.Tween(this)","                                                  .to({width:0.0, x:\"+32\"}, 300)","                                                  .easing(TWEEN.Easing.Linear.None).onComplete(function() {","                                                       this.tint = 0xffffff;","                                                  })","                                                  .chain(new TWEEN.Tween(this)","                                                  .to({alpha: 1.0, width:64, x:\"-32\"}, 300)","                                                  .easing(TWEEN.Easing.Linear.None))","                                             .start();","                                             // set the tile to selected","                                             this.isSelected = true;","                                             // show the tile","                                             //this.tint = 0xffffff;","                                             //this.alpha = 1;","                                             // is it the first tile we uncover?","                                             if(firstTile==null){","                                                  firstTile=this","                                             }","                                             // this is the second tile","                                             else{","                                                  secondTile=this","                                                  // can't pick anymore","                                                  canPick=false;","                                                  // did we pick the same tiles?","                                                  if(firstTile.theVal==secondTile.theVal){","                                                       // wait a second then remove the tiles and make the player able to pick again","                                                       setTimeout(function(){","                                                            new TWEEN.Tween(firstTile)","                                                                 .to({width:\"+100\", height:\"+100\", x:\"-50\", y:\"-50\", alpha:0.0}, 600)","                                                                 .easing(TWEEN.Easing.Linear.None)","                                                                 .onComplete(function() {","                                                                      gameContainer.removeChild(this);","                                                                 })","                                                            .start();","                                                            new TWEEN.Tween(secondTile)","                                                                 .to({width:\"+100\", height:\"+100\", x:\"-50\", y:\"-50\", alpha:0.0}, 600)","                                                                 .easing(TWEEN.Easing.Linear.None).onComplete(function() {    ","                                                                      gameContainer.removeChild(this);","                                                                      canPick=true;","                                                                 })","                                                            .start();","                                                            firstTile=null;","                                                            secondTile=null;","                                                       },1000);","                                                  }","                                                  // we picked different tiles","                                                  else{","                                                       // wait a second then cover the tiles and make the player able to pick again","                                                       setTimeout(function(){","                                                            firstTile.isSelected=false","                                                            secondTile.isSelected=false","                                                            new TWEEN.Tween(firstTile)","                                                                 .to({alpha: 0.5, width:0.0, x:\"+32\"}, 150)","                                                                 .easing(TWEEN.Easing.Linear.None).onComplete(function() {","                                                                      this.tint = 0x000000;","                                                                 })","                                                                 .chain(new TWEEN.Tween(firstTile)","                                                                 .to({width:64, x:\"-32\"}, 150)","                                                                 .easing(TWEEN.Easing.Linear.None))","                                                            .start();","                                                            new TWEEN.Tween(secondTile)","                                                                 .to({alpha: 0.5, width:0.0, x:\"+32\"}, 150)","                                                                 .easing(TWEEN.Easing.Linear.None)","                                                                 .onComplete(function() {","                                                                      this.tint = 0x000000;","                                                                      canPick=true;","                                                                 })","                                                                 .chain(new TWEEN.Tween(secondTile)","                                                                 .to({width:64, x:\"-32\"}, 150)","                                                                 .easing(TWEEN.Easing.Linear.None))","                                                            .start();","                                                            firstTile=null;","                                                            secondTile=null;","                                                       },1000);","                                                  }","                                             }\t","                                        }","                                   }","                              }","                         }","                    } ","                    requestAnimFrame(animate);","               }","               function animate() {","                    requestAnimFrame(animate);","                    TWEEN.update();","                    renderer.render(stage);","               }"]}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":17,"column":0},"end":{"row":17,"column":19}},"text":"          </script>"},{"action":"removeText","range":{"start":{"row":16,"column":8},"end":{"row":16,"column":18}},"text":"  <script>"},{"action":"removeText","range":{"start":{"row":16,"column":8},"end":{"row":17,"column":0}},"text":"\n"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":13,"column":44},"end":{"row":14,"column":0}},"text":"\n"},{"action":"insertText","range":{"start":{"row":14,"column":0},"end":{"row":14,"column":10}},"text":"          "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":14,"column":10},"end":{"row":14,"column":11}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":14,"column":10},"end":{"row":14,"column":11}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":14,"column":10},"end":{"row":14,"column":44}},"text":"<script src=\"tweenjs.js\"></script>"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":14,"column":23},"end":{"row":14,"column":30}},"text":"tweenjs"},{"action":"insertText","range":{"start":{"row":14,"column":23},"end":{"row":14,"column":24}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":14,"column":24},"end":{"row":14,"column":25}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":14,"column":25},"end":{"row":14,"column":26}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":14,"column":26},"end":{"row":14,"column":27}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":17,"column":8},"end":{"row":17,"column":9}},"text":"<"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":17,"column":9},"end":{"row":17,"column":10}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":17,"column":10},"end":{"row":17,"column":11}},"text":"c"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":17,"column":11},"end":{"row":17,"column":12}},"text":"r"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":17,"column":12},"end":{"row":17,"column":13}},"text":"i"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":17,"column":13},"end":{"row":17,"column":14}},"text":"p"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":17,"column":14},"end":{"row":17,"column":15}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":17,"column":15},"end":{"row":17,"column":25}},"text":"></script>"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":17,"column":16},"end":{"row":17,"column":17}},"text":"i"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":17,"column":17},"end":{"row":17,"column":18}},"text":"n"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":17,"column":18},"end":{"row":17,"column":19}},"text":"i"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":17,"column":19},"end":{"row":17,"column":20}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":17,"column":20},"end":{"row":17,"column":21}},"text":"("}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":17,"column":21},"end":{"row":17,"column":22}},"text":")"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":17,"column":22},"end":{"row":17,"column":23}},"text":";"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":12,"column":45},"end":{"row":13,"column":0}},"text":"\n"},{"action":"insertText","range":{"start":{"row":13,"column":0},"end":{"row":13,"column":10}},"text":"          "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":13,"column":10},"end":{"row":13,"column":53}},"text":"\t<script src=\"NormalMapFilter.js\"></script>"}]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":13,"column":53},"end":{"row":13,"column":53},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":243,"mode":"ace/mode/html"}},"timestamp":1411480194624,"hash":"f1fa29263730cc0fe82dff4343b74241c7ff3447"}